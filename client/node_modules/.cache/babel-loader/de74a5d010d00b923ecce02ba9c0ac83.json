{"ast":null,"code":"var _jsxFileName = \"/Users/deeidowu/Desktop/2020-Coding-Content/Movie-App-Clone/movie-app/client/src/components/views/MovieDetail/Sections/LikeDislikes.js\";\nimport React, { useEffect, useState } from \"react\";\nimport { Tooltip, Icon } from \"antd\";\nimport Axios from \"axios\";\nimport { useSelector } from \"react-redux\";\n\nfunction LikeDislikes(props) {\n  const user = useSelector(state => state.user);\n  const [Likes, setLikes] = useState(0);\n  const [Dislikes, setDislikes] = useState(0);\n  const [LikeAction, setLikeAction] = useState(null);\n  const [DislikeAction, setDislikeAction] = useState(null);\n  let variable = {};\n\n  if (props.video) {\n    variable = {\n      videoId: props.videoId,\n      userId: props.userId\n    };\n  } else {\n    variable = {\n      commentId: props.commentId,\n      userId: props.userId\n    };\n  }\n\n  useEffect(() => {\n    Axios.post(\"/api/like/getLikes\", variable).then(response => {\n      console.log(\"getLikes\", response.data);\n\n      if (response.data.success) {\n        //How many likes does this video or comment have\n        setLikes(response.data.likes.length); //if I already click this like button or not\n\n        response.data.likes.map(like => {\n          if (like.userId === props.userId) {\n            setLikeAction(\"liked\");\n          }\n        });\n      } else {\n        alert(\"Failed to get likes\");\n      }\n    });\n    Axios.post(\"/api/like/getDislikes\", variable).then(response => {\n      console.log(\"getDislike\", response.data);\n\n      if (response.data.success) {\n        //How many likes does this video or comment have\n        setDislikes(response.data.dislikes.length); //if I already click this like button or not\n\n        response.data.dislikes.map(dislike => {\n          if (dislike.userId === props.userId) {\n            setDislikeAction(\"disliked\");\n          }\n        });\n      } else {\n        alert(\"Failed to get dislikes\");\n      }\n    });\n  }, []);\n\n  const onLike = () => {\n    if (user.userData && !user.userData.isAuth) {\n      return alert(\"Please Log in first\");\n    }\n\n    if (LikeAction === null) {\n      Axios.post(\"/api/like/upLike\", variable).then(response => {\n        if (response.data.success) {\n          setLikes(Likes + 1);\n          setLikeAction(\"liked\"); //If dislike button is already clicked\n\n          if (DislikeAction !== null) {\n            setDislikeAction(null);\n            setDislikes(Dislikes - 1);\n          }\n        } else {\n          alert(\"Failed to increase the like\");\n        }\n      });\n    } else {\n      Axios.post(\"/api/like/unLike\", variable).then(response => {\n        if (response.data.success) {\n          setLikes(Likes - 1);\n          setLikeAction(null);\n        } else {\n          alert(\"Failed to decrease the like\");\n        }\n      });\n    }\n  };\n\n  const onDisLike = () => {\n    if (user.userData && !user.userData.isAuth) {\n      return alert(\"Please Log in first\");\n    }\n\n    if (DislikeAction !== null) {\n      Axios.post(\"/api/like/unDisLike\", variable).then(response => {\n        if (response.data.success) {\n          setDislikes(Dislikes - 1);\n          setDislikeAction(null);\n        } else {\n          alert(\"Failed to decrease dislike\");\n        }\n      });\n    } else {\n      Axios.post(\"/api/like/upDisLike\", variable).then(response => {\n        if (response.data.success) {\n          setDislikes(Dislikes + 1);\n          setDislikeAction(\"disliked\"); //If dislike button is already clicked\n\n          if (LikeAction !== null) {\n            setLikeAction(null);\n            setLikes(Likes - 1);\n          }\n        } else {\n          alert(\"Failed to increase dislike\");\n        }\n      });\n    }\n  };\n\n  return React.createElement(React.Fragment, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124\n    },\n    __self: this\n  }, React.createElement(\"span\", {\n    key: \"comment-basic-like\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125\n    },\n    __self: this\n  }, React.createElement(Tooltip, {\n    title: \"Like\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126\n    },\n    __self: this\n  }, React.createElement(Icon, {\n    type: \"like\",\n    theme: LikeAction === \"liked\" ? \"filled\" : \"outlined\",\n    onClick: onLike,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127\n    },\n    __self: this\n  })), React.createElement(\"span\", {\n    style: {\n      paddingLeft: \"8px\",\n      cursor: \"auto\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133\n    },\n    __self: this\n  }, Likes)), \"\\xA0\\xA0\\xA0\\xA0\", React.createElement(\"span\", {\n    key: \"comment-basic-dislike\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136\n    },\n    __self: this\n  }, React.createElement(Tooltip, {\n    title: \"Dislike\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137\n    },\n    __self: this\n  }, React.createElement(Icon, {\n    type: \"dislike\",\n    theme: DislikeAction === \"disliked\" ? \"filled\" : \"outlined\",\n    onClick: onDisLike,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138\n    },\n    __self: this\n  })), React.createElement(\"span\", {\n    style: {\n      paddingLeft: \"8px\",\n      cursor: \"auto\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144\n    },\n    __self: this\n  }, Dislikes)));\n}\n\nexport default LikeDislikes;","map":{"version":3,"sources":["/Users/deeidowu/Desktop/2020-Coding-Content/Movie-App-Clone/movie-app/client/src/components/views/MovieDetail/Sections/LikeDislikes.js"],"names":["React","useEffect","useState","Tooltip","Icon","Axios","useSelector","LikeDislikes","props","user","state","Likes","setLikes","Dislikes","setDislikes","LikeAction","setLikeAction","DislikeAction","setDislikeAction","variable","video","videoId","userId","commentId","post","then","response","console","log","data","success","likes","length","map","like","alert","dislikes","dislike","onLike","userData","isAuth","onDisLike","paddingLeft","cursor"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { Tooltip, Icon } from \"antd\";\nimport Axios from \"axios\";\nimport { useSelector } from \"react-redux\";\n\nfunction LikeDislikes(props) {\n  const user = useSelector(state => state.user);\n\n  const [Likes, setLikes] = useState(0);\n  const [Dislikes, setDislikes] = useState(0);\n  const [LikeAction, setLikeAction] = useState(null);\n  const [DislikeAction, setDislikeAction] = useState(null);\n  let variable = {};\n\n  if (props.video) {\n    variable = { videoId: props.videoId, userId: props.userId };\n  } else {\n    variable = { commentId: props.commentId, userId: props.userId };\n  }\n\n  useEffect(() => {\n    Axios.post(\"/api/like/getLikes\", variable).then(response => {\n      console.log(\"getLikes\", response.data);\n\n      if (response.data.success) {\n        //How many likes does this video or comment have\n        setLikes(response.data.likes.length);\n\n        //if I already click this like button or not\n        response.data.likes.map(like => {\n          if (like.userId === props.userId) {\n            setLikeAction(\"liked\");\n          }\n        });\n      } else {\n        alert(\"Failed to get likes\");\n      }\n    });\n\n    Axios.post(\"/api/like/getDislikes\", variable).then(response => {\n      console.log(\"getDislike\", response.data);\n      if (response.data.success) {\n        //How many likes does this video or comment have\n        setDislikes(response.data.dislikes.length);\n\n        //if I already click this like button or not\n        response.data.dislikes.map(dislike => {\n          if (dislike.userId === props.userId) {\n            setDislikeAction(\"disliked\");\n          }\n        });\n      } else {\n        alert(\"Failed to get dislikes\");\n      }\n    });\n  }, []);\n\n  const onLike = () => {\n    if (user.userData && !user.userData.isAuth) {\n      return alert(\"Please Log in first\");\n    }\n\n    if (LikeAction === null) {\n      Axios.post(\"/api/like/upLike\", variable).then(response => {\n        if (response.data.success) {\n          setLikes(Likes + 1);\n          setLikeAction(\"liked\");\n\n          //If dislike button is already clicked\n\n          if (DislikeAction !== null) {\n            setDislikeAction(null);\n            setDislikes(Dislikes - 1);\n          }\n        } else {\n          alert(\"Failed to increase the like\");\n        }\n      });\n    } else {\n      Axios.post(\"/api/like/unLike\", variable).then(response => {\n        if (response.data.success) {\n          setLikes(Likes - 1);\n          setLikeAction(null);\n        } else {\n          alert(\"Failed to decrease the like\");\n        }\n      });\n    }\n  };\n\n  const onDisLike = () => {\n    if (user.userData && !user.userData.isAuth) {\n      return alert(\"Please Log in first\");\n    }\n\n    if (DislikeAction !== null) {\n      Axios.post(\"/api/like/unDisLike\", variable).then(response => {\n        if (response.data.success) {\n          setDislikes(Dislikes - 1);\n          setDislikeAction(null);\n        } else {\n          alert(\"Failed to decrease dislike\");\n        }\n      });\n    } else {\n      Axios.post(\"/api/like/upDisLike\", variable).then(response => {\n        if (response.data.success) {\n          setDislikes(Dislikes + 1);\n          setDislikeAction(\"disliked\");\n\n          //If dislike button is already clicked\n          if (LikeAction !== null) {\n            setLikeAction(null);\n            setLikes(Likes - 1);\n          }\n        } else {\n          alert(\"Failed to increase dislike\");\n        }\n      });\n    }\n  };\n\n  return (\n    <React.Fragment>\n      <span key=\"comment-basic-like\">\n        <Tooltip title=\"Like\">\n          <Icon\n            type=\"like\"\n            theme={LikeAction === \"liked\" ? \"filled\" : \"outlined\"}\n            onClick={onLike}\n          />\n        </Tooltip>\n        <span style={{ paddingLeft: \"8px\", cursor: \"auto\" }}>{Likes}</span>\n      </span>\n      &nbsp;&nbsp;&nbsp;&nbsp;\n      <span key=\"comment-basic-dislike\">\n        <Tooltip title=\"Dislike\">\n          <Icon\n            type=\"dislike\"\n            theme={DislikeAction === \"disliked\" ? \"filled\" : \"outlined\"}\n            onClick={onDisLike}\n          />\n        </Tooltip>\n        <span style={{ paddingLeft: \"8px\", cursor: \"auto\" }}>{Dislikes}</span>\n      </span>\n    </React.Fragment>\n  );\n}\n\nexport default LikeDislikes;\n"]},"metadata":{},"sourceType":"module"}