{"ast":null,"code":"var _jsxFileName = \"/Users/deeidowu/Desktop/2020-Coding-Content/Movie-App-Clone/movie-app/client/src/components/views/MovieDetail/Sections/Favourite.js\";\nimport React, { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport { Button } from \"antd\";\nimport { useSelector } from \"react-redux\";\n\nfunction Favourite(props) {\n  const user = useSelector(state => state.user);\n  const movieId = props.movieId;\n  const userFrom = props.userFrom;\n  const movieTitle = props.movieInfo.title;\n  const moviePost = props.movieInfo.backdrop_path;\n  const movieRunTime = props.movieInfo.runtime;\n  const [FavouriteNumber, setFavouriteNumber] = useState(0);\n  const [Favourited, setFavourited] = useState(false);\n  const variables = {\n    movieId: movieId,\n    userFrom: userFrom,\n    movieTitle: movieTitle,\n    moviePost: moviePost,\n    movieRunTime: movieRunTime\n  };\n\n  const onClickFavourite = () => {\n    if (user.userData && !user.userData.isAuth) {\n      return alert(\"Please Log in first\");\n    }\n\n    if (Favourited) {\n      //when we are already subscribed\n      axios.post(\"/api/favourite/removeFromFavourite\", variables).then(response => {\n        if (response.data.success) {\n          setFavouriteNumber(FavouriteNumber - 1);\n          setFavourited(!Favourited);\n        } else {\n          alert(\"Failed to Remove From Favourite\");\n        }\n      });\n    } else {\n      // when we are not subscribed yet\n      axios.post(\"/api/favourite/addToFavourite\", variables).then(response => {\n        if (response.data.success) {\n          setFavouriteNumber(FavouriteNumber + 1);\n          setFavourited(!Favourited);\n        } else {\n          alert(\"Failed to Add To Favourite\");\n        }\n      });\n    }\n  };\n\n  useEffect(() => {\n    axios.post(\"/api/favourite/favouriteNumber\", variables).then(response => {\n      if (response.data.success) {\n        setFavouriteNumber(response.data.subscribeNumber);\n      } else {\n        alert(\"Failed to get Favourite Number\");\n      }\n    });\n    axios.post(\"/api/favorite/favorited\", variables).then(response => {\n      if (response.data.success) {\n        setFavourited(response.data.subcribed);\n      } else {\n        alert(\"Failed to get Favourite Information\");\n      }\n    });\n  }, []);\n  return React.createElement(React.Fragment, null, React.createElement(Button, {\n    onClick: onClickFavourite,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  }, \" \", !Favourited ? \"Add to Favourite\" : \"Not Favourite\", \" \", FavouriteNumber));\n}\n\nexport default Favourite;","map":{"version":3,"sources":["/Users/deeidowu/Desktop/2020-Coding-Content/Movie-App-Clone/movie-app/client/src/components/views/MovieDetail/Sections/Favourite.js"],"names":["React","useEffect","useState","axios","Button","useSelector","Favourite","props","user","state","movieId","userFrom","movieTitle","movieInfo","title","moviePost","backdrop_path","movieRunTime","runtime","FavouriteNumber","setFavouriteNumber","Favourited","setFavourited","variables","onClickFavourite","userData","isAuth","alert","post","then","response","data","success","subscribeNumber","subcribed"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,MAAT,QAAuB,MAAvB;AACA,SAASC,WAAT,QAA4B,aAA5B;;AAEA,SAASC,SAAT,CAAmBC,KAAnB,EAA0B;AACxB,QAAMC,IAAI,GAAGH,WAAW,CAACI,KAAK,IAAIA,KAAK,CAACD,IAAhB,CAAxB;AAEA,QAAME,OAAO,GAAGH,KAAK,CAACG,OAAtB;AACA,QAAMC,QAAQ,GAAGJ,KAAK,CAACI,QAAvB;AACA,QAAMC,UAAU,GAAGL,KAAK,CAACM,SAAN,CAAgBC,KAAnC;AACA,QAAMC,SAAS,GAAGR,KAAK,CAACM,SAAN,CAAgBG,aAAlC;AACA,QAAMC,YAAY,GAAGV,KAAK,CAACM,SAAN,CAAgBK,OAArC;AAEA,QAAM,CAACC,eAAD,EAAkBC,kBAAlB,IAAwClB,QAAQ,CAAC,CAAD,CAAtD;AACA,QAAM,CAACmB,UAAD,EAAaC,aAAb,IAA8BpB,QAAQ,CAAC,KAAD,CAA5C;AACA,QAAMqB,SAAS,GAAG;AAChBb,IAAAA,OAAO,EAAEA,OADO;AAEhBC,IAAAA,QAAQ,EAAEA,QAFM;AAGhBC,IAAAA,UAAU,EAAEA,UAHI;AAIhBG,IAAAA,SAAS,EAAEA,SAJK;AAKhBE,IAAAA,YAAY,EAAEA;AALE,GAAlB;;AAQA,QAAMO,gBAAgB,GAAG,MAAM;AAC7B,QAAIhB,IAAI,CAACiB,QAAL,IAAiB,CAACjB,IAAI,CAACiB,QAAL,CAAcC,MAApC,EAA4C;AAC1C,aAAOC,KAAK,CAAC,qBAAD,CAAZ;AACD;;AAED,QAAIN,UAAJ,EAAgB;AACd;AACAlB,MAAAA,KAAK,CACFyB,IADH,CACQ,oCADR,EAC8CL,SAD9C,EAEGM,IAFH,CAEQC,QAAQ,IAAI;AAChB,YAAIA,QAAQ,CAACC,IAAT,CAAcC,OAAlB,EAA2B;AACzBZ,UAAAA,kBAAkB,CAACD,eAAe,GAAG,CAAnB,CAAlB;AACAG,UAAAA,aAAa,CAAC,CAACD,UAAF,CAAb;AACD,SAHD,MAGO;AACLM,UAAAA,KAAK,CAAC,iCAAD,CAAL;AACD;AACF,OATH;AAUD,KAZD,MAYO;AACL;AAEAxB,MAAAA,KAAK,CAACyB,IAAN,CAAW,+BAAX,EAA4CL,SAA5C,EAAuDM,IAAvD,CAA4DC,QAAQ,IAAI;AACtE,YAAIA,QAAQ,CAACC,IAAT,CAAcC,OAAlB,EAA2B;AACzBZ,UAAAA,kBAAkB,CAACD,eAAe,GAAG,CAAnB,CAAlB;AACAG,UAAAA,aAAa,CAAC,CAACD,UAAF,CAAb;AACD,SAHD,MAGO;AACLM,UAAAA,KAAK,CAAC,4BAAD,CAAL;AACD;AACF,OAPD;AAQD;AACF,GA7BD;;AA+BA1B,EAAAA,SAAS,CAAC,MAAM;AACdE,IAAAA,KAAK,CAACyB,IAAN,CAAW,gCAAX,EAA6CL,SAA7C,EAAwDM,IAAxD,CAA6DC,QAAQ,IAAI;AACvE,UAAIA,QAAQ,CAACC,IAAT,CAAcC,OAAlB,EAA2B;AACzBZ,QAAAA,kBAAkB,CAACU,QAAQ,CAACC,IAAT,CAAcE,eAAf,CAAlB;AACD,OAFD,MAEO;AACLN,QAAAA,KAAK,CAAC,gCAAD,CAAL;AACD;AACF,KAND;AAQAxB,IAAAA,KAAK,CAACyB,IAAN,CAAW,yBAAX,EAAsCL,SAAtC,EAAiDM,IAAjD,CAAsDC,QAAQ,IAAI;AAChE,UAAIA,QAAQ,CAACC,IAAT,CAAcC,OAAlB,EAA2B;AACzBV,QAAAA,aAAa,CAACQ,QAAQ,CAACC,IAAT,CAAcG,SAAf,CAAb;AACD,OAFD,MAEO;AACLP,QAAAA,KAAK,CAAC,qCAAD,CAAL;AACD;AACF,KAND;AAOD,GAhBQ,EAgBN,EAhBM,CAAT;AAkBA,SACE,0CACE,oBAAC,MAAD;AAAQ,IAAA,OAAO,EAAEH,gBAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACG,GADH,EAEG,CAACH,UAAD,GAAc,kBAAd,GAAmC,eAFtC,OAEwDF,eAFxD,CADF,CADF;AAQD;;AAED,eAAeb,SAAf","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport { Button } from \"antd\";\nimport { useSelector } from \"react-redux\";\n\nfunction Favourite(props) {\n  const user = useSelector(state => state.user);\n\n  const movieId = props.movieId;\n  const userFrom = props.userFrom;\n  const movieTitle = props.movieInfo.title;\n  const moviePost = props.movieInfo.backdrop_path;\n  const movieRunTime = props.movieInfo.runtime;\n\n  const [FavouriteNumber, setFavouriteNumber] = useState(0);\n  const [Favourited, setFavourited] = useState(false);\n  const variables = {\n    movieId: movieId,\n    userFrom: userFrom,\n    movieTitle: movieTitle,\n    moviePost: moviePost,\n    movieRunTime: movieRunTime\n  };\n\n  const onClickFavourite = () => {\n    if (user.userData && !user.userData.isAuth) {\n      return alert(\"Please Log in first\");\n    }\n\n    if (Favourited) {\n      //when we are already subscribed\n      axios\n        .post(\"/api/favourite/removeFromFavourite\", variables)\n        .then(response => {\n          if (response.data.success) {\n            setFavouriteNumber(FavouriteNumber - 1);\n            setFavourited(!Favourited);\n          } else {\n            alert(\"Failed to Remove From Favourite\");\n          }\n        });\n    } else {\n      // when we are not subscribed yet\n\n      axios.post(\"/api/favourite/addToFavourite\", variables).then(response => {\n        if (response.data.success) {\n          setFavouriteNumber(FavouriteNumber + 1);\n          setFavourited(!Favourited);\n        } else {\n          alert(\"Failed to Add To Favourite\");\n        }\n      });\n    }\n  };\n\n  useEffect(() => {\n    axios.post(\"/api/favourite/favouriteNumber\", variables).then(response => {\n      if (response.data.success) {\n        setFavouriteNumber(response.data.subscribeNumber);\n      } else {\n        alert(\"Failed to get Favourite Number\");\n      }\n    });\n\n    axios.post(\"/api/favorite/favorited\", variables).then(response => {\n      if (response.data.success) {\n        setFavourited(response.data.subcribed);\n      } else {\n        alert(\"Failed to get Favourite Information\");\n      }\n    });\n  }, []);\n\n  return (\n    <>\n      <Button onClick={onClickFavourite}>\n        {\" \"}\n        {!Favourited ? \"Add to Favourite\" : \"Not Favourite\"} {FavouriteNumber}\n      </Button>\n    </>\n  );\n}\n\nexport default Favourite;\n"]},"metadata":{},"sourceType":"module"}